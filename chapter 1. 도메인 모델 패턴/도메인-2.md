# 도메인
## 도메인 모델 도출
도메인을 모델링할 때 기본이 되는 작업은 모델을 구성하는 핵심 구성요소, 규칙, 기능을 찾는 것.  
주문 도메인과 관련된 몇 가지 요구사항을 보자.  
1. 최소 한 종류 이상의 상품을 주문해야 한다.
2. 한 상품을 한 개 이상 주문할 수 있다.
3. 총 주문 금액은 각 상품의 구매 가격 합을 모두 더한 금액이다.
4. 각 상품의 구매 가격 합은 상품 가격에 구매 개수를 곱한 값이다.
5. 주문할 때 배송지 정보를 반드시 지정해야 한다.
6. 배송지 정보는 받는 사람 이름, 전화번호, 주소로 구성된다.
7. 출고를 하면 배송지를 변경할 수 없다.
8. 출고 전에 주문을 취소할 수 있다.
9. 고객이 결제를 완료하기 전에는 상품을 준비하지 않는다.

아직 상세 구현까지 할 수 있는 수준은 아니지만 Order에 관련 메서드를 추가할 수 있다.  
```
class Order {
    fun changeShipped() {}
    fun changeShippingInfo(newShippingInfo: ShippingInfo){}
    fun cancel(){}
    fun completePayment(){}
}
```

2, 4 번 요구사항에 따르면 주문항목을 표현하는 OrderLine은 적어도 주문할 상품, 상품의 가격, 구매 개수를 포함해야한다.  
추가로 각 구매 항목의 구매 가격도 제공해야 한다.  

```
class OrderLine(
    private val product: Product,
    private val price: Int,
    private val quantity: Int,
    private val amounts: Int
) {
    fun calculateAmounts() = price * quantity
    
    fun getAmounts() {}
}
```  
